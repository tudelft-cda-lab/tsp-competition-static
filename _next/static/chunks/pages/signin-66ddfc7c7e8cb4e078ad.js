_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[16],{"1OyB":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},"6xyR":function(e,t,n){"use strict";var r=n("RAs/"),a=n("hVfy"),c=n("eC2I"),o=n.n(c),s=n("q1tI"),i=n.n(s),u=n("vUet"),l=n("YdCC"),f=n("U1MP"),d=n("Wzyw"),b=["bsPrefix","className","variant","as"],p=i.a.forwardRef((function(e,t){var n=e.bsPrefix,c=e.className,s=e.variant,l=e.as,f=void 0===l?"img":l,d=Object(a.a)(e,b),p=Object(u.a)(n,"card-img");return i.a.createElement(f,Object(r.a)({ref:t,className:o()(s?p+"-"+s:p,c)},d))}));p.displayName="CardImg",p.defaultProps={variant:null};var j=p,m=["bsPrefix","className","bg","text","border","body","children","as"],h=Object(f.a)("h5"),O=Object(f.a)("h6"),y=Object(l.a)("card-body"),v=Object(l.a)("card-title",{Component:h}),x=Object(l.a)("card-subtitle",{Component:O}),w=Object(l.a)("card-link",{Component:"a"}),g=Object(l.a)("card-text",{Component:"p"}),P=Object(l.a)("card-header"),S=Object(l.a)("card-footer"),E=Object(l.a)("card-img-overlay"),N=i.a.forwardRef((function(e,t){var n=e.bsPrefix,c=e.className,l=e.bg,f=e.text,b=e.border,p=e.body,j=e.children,h=e.as,O=void 0===h?"div":h,v=Object(a.a)(e,m),x=Object(u.a)(n,"card"),w=Object(s.useMemo)((function(){return{cardHeaderBsPrefix:x+"-header"}}),[x]);return i.a.createElement(d.a.Provider,{value:w},i.a.createElement(O,Object(r.a)({ref:t},v,{className:o()(c,x,l&&"bg-"+l,f&&"text-"+f,b&&"border-"+b)}),p?i.a.createElement(y,null,j):j))}));N.displayName="Card",N.defaultProps={body:!1},N.Img=j,N.Title=v,N.Subtitle=x,N.Body=y,N.Link=w,N.Text=g,N.Header=P,N.Footer=S,N.ImgOverlay=E;t.a=N},"7xGa":function(e,t,n){"use strict";var r,a=n("RAs/"),c=n("hVfy"),o=n("eC2I"),s=n.n(o),i=n("q1tI"),u=n.n(i),l=n("dRu9"),f=n("wsUu"),d=n("z+q/"),b=["className","children"],p=((r={})[l.b]="show",r[l.a]="show",r),j=u.a.forwardRef((function(e,t){var n=e.className,r=e.children,o=Object(c.a)(e,b),j=Object(i.useCallback)((function(e){Object(d.a)(e),o.onEnter&&o.onEnter(e)}),[o]);return u.a.createElement(l.e,Object(a.a)({ref:t,addEndListener:f.a},o,{onEnter:j}),(function(e,t){return u.a.cloneElement(r,Object(a.a)({},t,{className:s()("fade",n,r.props.className,p[e])}))}))}));j.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},j.displayName="Fade",t.a=j},DB6d:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return N}));var r=n("nKUr"),a=n("g4pe"),c=n.n(a),o=(n("YFqc"),n("20a2")),s=n("q1tI"),i=n.n(s),u=n("dn3K"),l=n("o0o1"),f=n.n(l),d=n("HaE+"),b=n("1OyB"),p=n("vuIU"),j=n("JX7q"),m=n("Ji7U"),h=n("md7G"),O=n("foSv"),y=n("rePB"),v=n("QojX"),x=n("cWnB");function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(O.a)(e);if(t){var a=Object(O.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}var g=function(e){Object(m.a)(n,e);var t=w(n);function n(e){var r;return Object(b.a)(this,n),r=t.call(this,e),Object(y.a)(Object(j.a)(r),"handleSubmit",function(){var e=Object(d.a)(f.a.mark((function e(t){var n,a,c,o,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=r.context,n.session,a=n.setSession,(c=new FormData).append("username",r.username.current.value),c.append("password",r.password.current.value),e.prev=5,e.next=8,fetch("/api/auth/login",{method:"POST",body:c,credentials:"include"});case 8:return o=e.sent,e.next=11,o.json();case 11:(s=e.sent).success?(a(s),r.setState({showForm:!1}),r.props.handleSuccess()):r.props.handleFail(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.error("Login failed",e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}()),r.username=i.a.createRef(),r.password=i.a.createRef(),r.state={showForm:!0},r}return Object(p.a)(n,[{key:"render",value:function(){var e=this.context,t=e.session;e.setSession;return console.log("Session - from render:",t),Object(r.jsxs)(v.a,{onSubmit:this.handleSubmit,style:{display:this.state.showForm?null:"none"},children:[Object(r.jsxs)(v.a.Group,{controlId:"formBasicEmail",children:[Object(r.jsx)(v.a.Label,{children:"Username"}),Object(r.jsx)(v.a.Control,{type:"text",placeholder:"Enter username",ref:this.username})]}),Object(r.jsxs)(v.a.Group,{controlId:"formBasicPassword",children:[Object(r.jsx)(v.a.Label,{children:"Password"}),Object(r.jsx)(v.a.Control,{type:"password",placeholder:"Password",ref:this.password})]}),Object(r.jsx)(x.a,{variant:"success",type:"submit",children:"Log in"})]})}}]),n}(i.a.Component);Object(y.a)(g,"contextType",u.a);var P=g,S=n("6xyR"),E=n("7xGa");function N(){var e=Object(o.useRouter)(),t=Object(s.useContext)(u.a),n=(t.session,t.setSession,Object(s.useState)(!0)),a=n[0],i=n[1],l=Object(s.useState)(null),f=l[0],d=l[1];return Object(r.jsxs)("div",{className:"h-100 d-flex flex-column",children:[Object(r.jsxs)(c.a,{children:[Object(r.jsx)("title",{children:"AI for TSP competition"}),Object(r.jsx)("link",{rel:"icon",href:"img/icon.png"})]}),Object(r.jsx)("div",{className:"h-100 d-flex justify-content-center align-items-center",children:Object(r.jsx)(E.a,{appear:!0,in:a,children:Object(r.jsxs)(S.a,{style:{width:"28rem"},className:"shadow",children:[Object(r.jsx)(S.a.Header,{style:{background:"Login failed"===f?"red":"light"},children:f||"Please log in"}),Object(r.jsx)(S.a.Body,{children:Object(r.jsx)(P,{handleSuccess:function(){d("Login success"),i(!1),e.back()},handleFail:function(){d("Login failed")},loginMessage:f})})]})})})]})}},JX7q:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},Ji7U:function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",(function(){return a}))},foSv:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},hMb1:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin",function(){return n("DB6d")}])},md7G:function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return c}));var a=n("JX7q");function c(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?Object(a.a)(e):t}},rePB:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},vuIU:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return a}))}},[["hMb1",0,2,1,3,4,6]]]);